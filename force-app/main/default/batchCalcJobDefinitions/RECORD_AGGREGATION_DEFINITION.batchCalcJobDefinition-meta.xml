<?xml version="1.0" encoding="UTF-8"?>
<BatchCalcJobDefinition xmlns="http://soap.sforce.com/2006/04/metadata">
    <datasources>
        <fields>
            <alias>AccountContactRelation_AccountId</alias>
            <dataType>Text</dataType>
            <name>AccountId</name>
        </fields>
        <fields>
            <alias>AccountContactRelation_ContactId</alias>
            <dataType>Text</dataType>
            <name>ContactId</name>
        </fields>
        <label>AccountContactRelation</label>
        <name>AccountContactRelation</name>
        <sourceName>AccountContactRelation</sourceName>
        <type>StandardObject</type>
    </datasources>
    <datasources>
        <fields>
            <alias>Contact_AccountId</alias>
            <dataType>Text</dataType>
            <name>AccountId</name>
        </fields>
        <fields>
            <alias>Contact_Id</alias>
            <dataType>Text</dataType>
            <name>Id</name>
        </fields>
        <label>Contact</label>
        <name>Contact</name>
        <sourceName>Contact</sourceName>
        <type>StandardObject</type>
    </datasources>
    <datasources>
        <fields>
            <alias>PartyIncome_IncomeStatus</alias>
            <dataType>Text</dataType>
            <name>IncomeStatus</name>
        </fields>
        <fields>
            <alias>PartyIncome_PartyId</alias>
            <dataType>Text</dataType>
            <name>PartyId</name>
        </fields>
        <fields>
            <alias>PartyIncome_Id</alias>
            <dataType>Text</dataType>
            <name>Id</name>
        </fields>
        <label>PartyIncome</label>
        <name>PartyIncome</name>
        <sourceName>PartyIncome</sourceName>
        <type>StandardObject</type>
    </datasources>
    <datasources>
        <fields>
            <alias>PartyRelationshipGroup_Type</alias>
            <dataType>Text</dataType>
            <name>Type</name>
        </fields>
        <fields>
            <alias>PartyRelationshipGroup_AccountId</alias>
            <dataType>Text</dataType>
            <name>AccountId</name>
        </fields>
        <fields>
            <alias>PartyRelationshipGroup_Id</alias>
            <dataType>Text</dataType>
            <name>Id</name>
        </fields>
        <label>PartyRelationshipGroup</label>
        <name>PartyRelationshipGroup</name>
        <sourceName>PartyRelationshipGroup</sourceName>
        <type>StandardObject</type>
    </datasources>
    <datasources>
        <fields>
            <alias>RecordAggregationResult_AggregateToRecord_Id</alias>
            <dataType>Text</dataType>
            <name>AggregateToRecordId</name>
        </fields>
        <fields>
            <alias>RecordAggregationResult_AggregateFromRecord_Id</alias>
            <dataType>Text</dataType>
            <name>AggregateFromRecordId</name>
        </fields>
        <fields>
            <alias>RecordAggregationResult_RecordAggregationDefinition_Id</alias>
            <dataType>Text</dataType>
            <name>RecordAggregationDefinitionId</name>
        </fields>
        <fields>
            <alias>RecordAggregationResult_Id</alias>
            <dataType>Text</dataType>
            <name>Id</name>
        </fields>
        <label>RecordAggregationResult</label>
        <name>RecordAggregationResult</name>
        <sourceName>RecordAggregationResult</sourceName>
        <type>StandardObject</type>
    </datasources>
    <filters>
        <criteria>
            <operator>Equals</operator>
            <sequence>1</sequence>
            <sourceFieldName>IsStaleRecord</sourceFieldName>
            <value>N</value>
        </criteria>
        <filterCondition>1</filterCondition>
        <isDynamicFilter>false</isDynamicFilter>
        <label>Active Records Filter</label>
        <name>Active_Records_Filter</name>
        <sourceName>Identify_Stale_Data</sourceName>
    </filters>
    <filters>
        <criteria>
            <operator>Equals</operator>
            <sequence>1</sequence>
            <sourceFieldName>PartyIncome_IncomeStatus</sourceFieldName>
            <value>Active</value>
        </criteria>
        <filterCondition>1</filterCondition>
        <isDynamicFilter>false</isDynamicFilter>
        <label>PartyIncome_ft1</label>
        <name>PartyIncome_ft1</name>
        <sourceName>PartyIncome</sourceName>
    </filters>
    <filters>
        <criteria>
            <operator>Equals</operator>
            <sequence>1</sequence>
            <sourceFieldName>PartyRelationshipGroup_Type</sourceFieldName>
            <value>Household</value>
        </criteria>
        <filterCondition>1</filterCondition>
        <isDynamicFilter>false</isDynamicFilter>
        <label>PartyRelationshipGroup_ft1</label>
        <name>PartyRelationshipGroup_ft1</name>
        <sourceName>PartyRelationshipGroup</sourceName>
    </filters>
    <filters>
        <criteria>
            <operator>Equals</operator>
            <sequence>1</sequence>
            <sourceFieldName>IsStaleRecord</sourceFieldName>
            <value>Y</value>
        </criteria>
        <filterCondition>1</filterCondition>
        <isDynamicFilter>false</isDynamicFilter>
        <label>Stale Records Filter</label>
        <name>Stale_Records_Filter</name>
        <sourceName>Identify_Stale_Data</sourceName>
    </filters>
    <isTemplate>false</isTemplate>
    <joins>
        <fields>
            <alias>ConfigId</alias>
            <sourceFieldName>ConfigId</sourceFieldName>
            <sourceName>RA0wK_07k_j1_003_j2_2m3_j3_fr</sourceName>
        </fields>
        <fields>
            <alias>Id</alias>
            <sourceFieldName>RecordAggregationResult_Id</sourceFieldName>
            <sourceName>RecordAggregationResult</sourceName>
        </fields>
        <fields>
            <alias>sourceId</alias>
            <sourceFieldName>sourceId</sourceFieldName>
            <sourceName>RA0wK_07k_j1_003_j2_2m3_j3_fr</sourceName>
        </fields>
        <fields>
            <alias>targetId</alias>
            <sourceFieldName>targetId</sourceFieldName>
            <sourceName>RA0wK_07k_j1_003_j2_2m3_j3_fr</sourceName>
        </fields>
        <joinKeys>
            <primarySourceFieldName>sourceId</primarySourceFieldName>
            <secondarySourceFieldName>RecordAggregationResult_AggregateToRecord_Id</secondarySourceFieldName>
        </joinKeys>
        <joinKeys>
            <primarySourceFieldName>targetId</primarySourceFieldName>
            <secondarySourceFieldName>RecordAggregationResult_AggregateFromRecord_Id</secondarySourceFieldName>
        </joinKeys>
        <joinKeys>
            <primarySourceFieldName>ConfigId</primarySourceFieldName>
            <secondarySourceFieldName>RecordAggregationResult_RecordAggregationDefinition_Id</secondarySourceFieldName>
        </joinKeys>
        <label>AggregateResultJoin</label>
        <name>AggregateResultJoin</name>
        <primarySourceName>RA0wK_07k_j1_003_j2_2m3_j3_fr</primarySourceName>
        <secondarySourceName>RecordAggregationResult</secondarySourceName>
        <type>Outer</type>
    </joins>
    <joins>
        <fields>
            <alias>AccountContactRelation_ContactId</alias>
            <sourceFieldName>AccountContactRelation_ContactId</sourceFieldName>
            <sourceName>AccountContactRelation</sourceName>
        </fields>
        <fields>
            <alias>sourceId</alias>
            <sourceFieldName>PartyRelationshipGroup_Id</sourceFieldName>
            <sourceName>PartyRelationshipGroup_ft1</sourceName>
        </fields>
        <joinKeys>
            <primarySourceFieldName>PartyRelationshipGroup_AccountId</primarySourceFieldName>
            <secondarySourceFieldName>AccountContactRelation_AccountId</secondarySourceFieldName>
        </joinKeys>
        <label>RA0wK_07k_j1</label>
        <name>RA0wK_07k_j1</name>
        <primarySourceName>PartyRelationshipGroup_ft1</primarySourceName>
        <secondarySourceName>AccountContactRelation</secondarySourceName>
        <type>Inner</type>
    </joins>
    <joins>
        <fields>
            <alias>Contact_AccountId</alias>
            <sourceFieldName>Contact_AccountId</sourceFieldName>
            <sourceName>Contact</sourceName>
        </fields>
        <fields>
            <alias>sourceId</alias>
            <sourceFieldName>sourceId</sourceFieldName>
            <sourceName>RA0wK_07k_j1</sourceName>
        </fields>
        <joinKeys>
            <primarySourceFieldName>AccountContactRelation_ContactId</primarySourceFieldName>
            <secondarySourceFieldName>Contact_Id</secondarySourceFieldName>
        </joinKeys>
        <label>RA0wK_07k_j1_003_j2</label>
        <name>RA0wK_07k_j1_003_j2</name>
        <primarySourceName>RA0wK_07k_j1</primarySourceName>
        <secondarySourceName>Contact</secondarySourceName>
        <type>Inner</type>
    </joins>
    <joins>
        <fields>
            <alias>sourceId</alias>
            <sourceFieldName>sourceId</sourceFieldName>
            <sourceName>RA0wK_07k_j1_003_j2</sourceName>
        </fields>
        <fields>
            <alias>targetId</alias>
            <sourceFieldName>PartyIncome_Id</sourceFieldName>
            <sourceName>PartyIncome_ft1</sourceName>
        </fields>
        <joinKeys>
            <primarySourceFieldName>Contact_AccountId</primarySourceFieldName>
            <secondarySourceFieldName>PartyIncome_PartyId</secondarySourceFieldName>
        </joinKeys>
        <label>RA0wK_07k_j1_003_j2_2m3_j3</label>
        <name>RA0wK_07k_j1_003_j2_2m3_j3</name>
        <primarySourceName>RA0wK_07k_j1_003_j2</primarySourceName>
        <secondarySourceName>PartyIncome_ft1</secondarySourceName>
        <type>Inner</type>
    </joins>
    <label>RECORD_AGGREGATION_DEFINITION</label>
    <processType>RecordAggregation</processType>
    <status>Active</status>
    <transforms>
        <expressionFields>
            <alias>IsStaleRecord</alias>
            <dataType>Text</dataType>
            <expression>IF(ISNULL({ConfigId}), IF(ISNULL({sourceId}) , IF(ISNULL({targetId}) , &quot;Y&quot;, &quot;N&quot;) , &quot;N&quot;)  , &quot;N&quot;)</expression>
            <length>1</length>
        </expressionFields>
        <label>Identify_Stale_Data</label>
        <name>Identify_Stale_Data</name>
        <sourceName>AggregateResultJoin</sourceName>
        <transformationType>Expression</transformationType>
    </transforms>
    <transforms>
        <expressionFields>
            <alias>ConfigId</alias>
            <dataType>Text</dataType>
            <expression>&quot;16y1Q000000Gma9QAC&quot;</expression>
            <length>255</length>
        </expressionFields>
        <label>RA0wK_07k_j1_003_j2_2m3_j3_fr</label>
        <name>RA0wK_07k_j1_003_j2_2m3_j3_fr</name>
        <sourceName>RA0wK_07k_j1_003_j2_2m3_j3</sourceName>
        <transformationType>Expression</transformationType>
    </transforms>
    <writebacks>
        <fields>
            <sourceFieldName>Id</sourceFieldName>
            <targetFieldName>Id</targetFieldName>
        </fields>
        <isChangedRow>false</isChangedRow>
        <label>StaleData Delete Writeback</label>
        <name>StaleData_Delete_Writeback</name>
        <operationType>Delete</operationType>
        <sourceName>Stale_Records_Filter</sourceName>
        <targetObjectName>RecordAggregationResult</targetObjectName>
        <writebackSequence>2</writebackSequence>
        <writebackUser>005Hu00000RLgEyIAL</writebackUser>
    </writebacks>
    <writebacks>
        <fields>
            <sourceFieldName>sourceId</sourceFieldName>
            <targetFieldName>AggregateToRecordId</targetFieldName>
        </fields>
        <fields>
            <sourceFieldName>targetId</sourceFieldName>
            <targetFieldName>AggregateFromRecordId</targetFieldName>
        </fields>
        <fields>
            <sourceFieldName>ConfigId</sourceFieldName>
            <targetFieldName>RecordAggregationDefinitionId</targetFieldName>
        </fields>
        <fields>
            <sourceFieldName>Id</sourceFieldName>
            <targetFieldName>Id</targetFieldName>
        </fields>
        <isChangedRow>true</isChangedRow>
        <label>ValidData Upsert writeback</label>
        <name>ValidData_Upsert_writeback</name>
        <operationType>Upsert</operationType>
        <sourceName>Active_Records_Filter</sourceName>
        <targetObjectName>RecordAggregationResult</targetObjectName>
        <writebackSequence>1</writebackSequence>
        <writebackUser>005Hu00000RLgEyIAL</writebackUser>
    </writebacks>
</BatchCalcJobDefinition>
